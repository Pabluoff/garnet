<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="UTF-8">
    <meta name="theme-color" content="#0b0b0c">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <script src="https://kit.fontawesome.com/cd363fe7f3.js" crossorigin="anonymous"></script>
    <script type="module" src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.esm.js"></script>
    <script nomodule src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.js"></script>
    <link rel="stylesheet" href="/css/styles.css">
    <link rel="manifest" href="/js/manifest.json">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <link rel="apple-touch-icon" sizes="180x180" href="/img/apple-touch-icon.png">
    <link rel="apple-touch-startup-image" href="/img/Garnet-ip.png"
        media="(device-width: 375px) and (device-height: 812px) and (-webkit-device-pixel-ratio: 3)">
    <link rel="apple-touch-startup-image" href="/img/Garnet-ip.png"
        media="(device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 3)">
    <link rel="apple-touch-startup-image" href="/img/Garnet-ip.png"
        media="(device-width: 390px) and (device-height: 844px) and (-webkit-device-pixel-ratio: 3)">
    <link rel="apple-touch-startup-image" href="/img/Garnet-ip.png"
        media="(device-width: 360px) and (device-height: 780px) and (-webkit-device-pixel-ratio: 3)">
    <link rel="apple-touch-startup-image" href="/img/Garnet-ip.png"
        media="(device-width: 375px) and (device-height: 667px) and (-webkit-device-pixel-ratio: 2)">
    <link rel="apple-touch-startup-image" href="/img/Garnet-ip.png"
        media="(device-width: 414px) and (device-height: 736px) and (-webkit-device-pixel-ratio: 3)">
    <link rel="apple-touch-startup-image" href="/img/Garnet-ip.png"
        media="(device-width: 320px) and (device-height: 568px) and (-webkit-device-pixel-ratio: 2)">
    <link rel="icon" type="image/png" sizes="32x32" href="/img/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/img/favicon-16x16.png">
    <title>Garnet</title>
</head>

<body>
    <div class="magic-nav">
        <ul>
            <li><a href="/inicio"><ion-icon name="person-outline"></ion-icon></a></li>
            <li><a href="/search"><ion-icon name="search-outline"></ion-icon></a></li>
            <li><a href="/settings"><ion-icon name="game-controller-outline"></ion-icon></a></li>
            <li><a href="/IA"><ion-icon name="cube"></ion-icon></a></li>
        </ul>
    </div>

    <!-- Overlay de interação -->
    <div class="overlay" id="overlay">
        <button class="btn-start" onclick="iniciarFala()">Clique para começar</button>
    </div>

    <script>
        let fala;

        function bemVindoVoz() {
            if ('speechSynthesis' in window) {
                const nome = localStorage.getItem('nome') || 'usuário'; // Nome salvo no localStorage
                fala = new SpeechSynthesisUtterance(`Bem-vindo, ${nome}`);
                fala.lang = 'pt-BR'; // Define o idioma para português brasileiro
                fala.rate = 1;

                // Aguarda o carregamento das vozes e tenta selecionar uma voz masculina
                window.speechSynthesis.onvoiceschanged = function() {
                    const vozes = window.speechSynthesis.getVoices();
                    let vozMasculina;

                    if (navigator.userAgent.match(/iPhone|iPad|iPod/)) {
                        // Tentativa de buscar voz masculina no iOS
                        vozMasculina = vozes.find(voz => voz.lang === 'pt-BR' && voz.name.includes('Diego'));
                    }

                    if (!vozMasculina) {
                        vozMasculina = vozes.find(voz => voz.lang === 'pt-BR' && voz.name.includes('Google Brasileiro Masculino'));
                    }

                    if (vozMasculina) {
                        fala.voice = vozMasculina;
                    } else {
                        console.log('Voz masculina não encontrada. Usando a padrão.');
                    }
                };
            } else {
                console.log('A síntese de fala não é suportada neste navegador.');
            }
        }

        const iniciarFala = () => {
            if (fala) {
                window.speechSynthesis.speak(fala);
                document.getElementById('overlay').style.display = 'none'; // Remove a overlay
            }
        };

        // Função para detectar desktop
        function detectDesktop() {
            if (window.innerWidth > 1024) {
                window.location.href = 'https://usegarnet.online/desk';
            }
        }

        // Chamadas de funções na carga da página
        window.onload = function() {
            detectDesktop();
            bemVindoVoz();
        };
    </script>
</body>

</html>